2018/09/18

[TOC]

### 重拾flaskbb

- [x] 使用现成的包安装
- [x] 搭建项目结构，基本的安装
- [x] 安装命令的实现（click）
- [x] 首页实现
- [x] 使用蓝图
- [x] 使用数据库
- [x] 数据库迁移
- [x] 用户功能
- [x] memberlist
- [ ] forum
- [ ] ......
- [ ] 使用正式的服务器

### Logging

还是先学习flask这块的文档http://flask.pocoo.org/docs/dev/logging/

Flask使用标准的python logging模块，直接通过app.logger使用

app.logger.info('%s logged in successfully', user.username)

app.logger.info('%s failed to login', user.username)

基本配置

> If possible, configure logging before creating the application object

```
from logging.config import dictConfig

dictConfig({
    'version':1,
    'formatters':{},
    'handlers':{},
    'root':{
    	'level':'INFO',
    	'handlers':['wsgi']
    }
})
```

如果没有配置logging，flask将默认添加一个StreamHandler到app.logger。

可以手动删除这个Default Handler

from flask.logging import default_handler

app.logger.removeHandler(default_handler)



对于项目

首先，我可以不配置任何日志，调用下日志看。

我怎么得到app对象呢？使用current_app是否可行？

```python
[2018-09-18 07:09:52,974] ERROR in views: cheng.lu logged in successfully---------
lucheng test -------------
```

注意：测试发现，当前info级别日志没有打印，只打印了error级别的






